#!/usr/bin/env bash

notify_cmd='notify-send -h string:x-canonical-private-synchronous:sys-notify -u low'

if ! command -v alacritty &> /dev/null
then
	$notify_cmd "'alacritty' is not installed."
    exit 1
fi


VALID_ARGS=$(getopt -o fe:c: --long float,command:,class: -- "$@")
if [[ $? -ne 0 ]]; then
    exit 1;
fi

eval set -- "$VALID_ARGS"
while [ : ]; do
  case "$1" in
    -f | --float)
      if [[ -n "$CLASS" ]]; then
        echo -e "Cannot have multiple class"
        exit 0
      fi
      CLASS="float-terminal"
      shift
      ;;
    -e | --command)
      CMD=$2
      shift 2
      ;;
    -c  | --class)
      if [[ -n "$CLASS" ]]; then
        echo -e "Cannot have multiple class"
        exit 0
      fi
      CLASS="$2"
      shift 2
      ;;
    --) shift; 
      break 
      ;;
  esac
done

alacritty ${CLASS:+--class $CLASS} ${CMD:+--command $CMD}

